01-OCT-10 (Christos), V00-01-48
===============================
Add more info when printing out events with high-pt muons


30-SEP-10 (Christos), V00-01-47
===============================
(a) Simplified the plot-making macros (loop over algorithms instead of
copying  + pasting) in order to make it easier to add/remove tracking
algorithms 

(b) "Simplified" structure of selection-cut loop in order to make it 
easier to make changes in the order of selection cuts (e.g. putting the
quality cut at  the end to study which cuts eliminate high-pt muon
candidates).  


27-SEP-10 (Christos), V00-01-46
===============================
o Updated data root-tuples (3.077 pb^-1)

o IMPORTANT: integrated luminosity for single-muon collision data is now
extracted from data description in file samples_cross_sections.txt . This
value 
  (a) is used to scale the MC distributions to match the data
  (b) is stored in Wprime_analysis.root file in single-bin histogram 
named "lumi_ipb" (units: inverst picobarns)
  (c) is used by plotting/fitting macros to determine how the 
MC histograms have been scaled and create e.g. "data, XYZ pb^{-1}" labels


13-SEP-10 (Edgar, Christos), V00-01-45
======================================
o Updated data root-tuples made by Boston (1.32 pb^-1 -> 2.88 pb^-1)

o Place muon quality cut at beginning of selection chain since it seems to
be necessary to obtain an acceptable MC-data matching

o Added more muon kinematic plots: eta, phi, JetDeltaPhi, isolation,
transverse mass (NB: transverse mass is using pfMET and is therefore
correct only for global muon tracking)

o Switch to Exotica muon recommendations for quality cuts; Other cuts, 
such as # of siStrip/pixel layers used in the fit, need to be studied
further, but they seem to be making a small difference.



03-SEP-10 (Christos), V00-01-40
===============================
(1) Data format changes:
o Added per tracking algorithm (wprime::Track):
  - Nstrip_layerNoMeas (# of siStrip layers without measurement)
  - Npixel_layerNoMeas (# of pixel layers without measurement)
  - Nmuon hits (# of muon hits used by fit)

o Added more trigger bits (wprime::Event): 
  HLT_Mu7, HLT_Mu11, HLT_L2Mu15, HLT_L2Mu25

o Added # of primary vertices (wprime::Event) calculated with and without
beamspot info [NB: Example py file has been updated!]

o Removed wprime::JobInfo::Nprod_evt (no longer used/filled, as it is
provided in text configuration file) [NB: Example py file has been 
updated!]


(2) Cleaned-up example py files


02-SEP-10 (Christos), V00-01-32
================================

Fitting code tuning:
--------------------
o Defined "mass point" to be used for fits of (early) data or
background-only MC distributions. The value determines the initial value 
of the mass in the fit, but more importantly, the resolution
function. Should we set to (mass value of) expected limit of Wprime reach?
Someting to think about...

o Switched default background function to RBW for description of muon pt
spectrum

o Fix 1st parameter of background function (whether RBW or Landau)

o Fix logic that will allow fit of data distributions (ie. without MC 
info)

o Added fitting macros for data distributions

o Make sure correct histogram is used for fit even if we reverse cut ordering

o Increased default # of bins to help define shape of muon-pt spectrum
around 100 GeV

ROOT macros:
o Make sure correct plot is made even if we reverse cut ordering


30-AUG-10 (Christos, Edgar), V00-01-31
=======================================
- Fix histogram label ordering (first pt-range, then single-muon)
- Updated data root-tuples (V00-01-21 compatible) made by Boston


29-AUG-10 (Christos, Edgar), V00-01-30
=======================================
(a) Updated macros to accommodate additional tracking algorithms 
(cocktail, picky, TMR). Input root-tuples made with V00-01-21 are 
available at castor (see UserCode/CMGWPrimeCode/doc/README.txt for 
details)

(b) Selection cuts:
  o default cut: switched to relative combined isolation
  o default cut: switched from minimum # of tracker hits to minimum # of
tracker layers (where tracker:= pixel + silicon)
  o bugfix in determining angle between jet and muon in jet-veto cut:
angle(jet, mu) should have been |angle(jet, mu)|

(c) Fitting:
  o Some structural changes to facilitate studies of ensembles of
pseudo-experiments, and to also deal with fits of real data
  o Tuning of fit parameters
  o Updated W width to newer PDG value (2.141 -> 2.196 GeV)
  o Changed default value of Wprime width "fudge" factor (2.0 -> 1.0)
  o Changed default resolution to that of TPFMS algorithm

(d) Misc:
  o Updated data root-tuples made by Boston (0.255 nb^-1 -> 0.84 pb^-1)
  o Updated file with resolution histograms made with START3X and 3_5_6
Wprime samples
  o Removed (obsolete option=2) JetIso constants from
loadCutsAndTresholds.h) 
  o Removed (not-used) relative-pt isolation function to avoid confusion
  o Cleanup example py file by removing unnecessary parameters



08-AUG-10 (Christos), V00-01-21
===============================
Added protection against cases for which TeV tracking has failed.


07-AUG-10 (Christos), V00-01-20
===============================
(a) Added more TeV (ie. high-pt) muon algorithms to root-tuple makes (muon
structures0: picky, cocktail and TMR (DYT not added yet, available since
380 release); Renamed "tev_1st" to more appropriate "tpfms".

(b) Now keeping events for which TeV muon algorithms fail (~3% of real 
data muons processed with 3_6_x having pt > 10 GeV)


23-JUL-10 (Christos), V00-01-14
===============================
(a) Switch default TTbar MC file to MC@NLO.
New configuration: samples_cross_sections.txt
(copy at samples_cross_sections_v2.txt)
Old configuration: samples_cross_sections_v1.txt

(b) Add (debug) flag for printing info on high-pt muons (flag
dumpHighPtMuons to be set in loadCutsAndThresholds.h)

(c) Add definition of relative muon isolation loadCutsAndThresholds.h/C;
not used by default)


22-JUL-10 (Christos), V00-01-13
===============================
- Incorporated Muon POG recommendations in muon-selection cuts
(loadCutsAndThresholds.C) 

- Small adjustments in plot-making macros to include more Wprime mass
points for illustration


22-JUL-10 (Christos), V00-01-11
===============================
Added (muon skim) data ROOT-file corresponding to 255 nb^-1 (updated 
files: config/samples_cross_sections.txt, root_macros/loadInputFiles.C,
plotMuPt.C, plotMuPt2.C, run.C)


16-JUL-10 (Christos), V00-01-10
===============================
Adapted code to deal with new Spring10 MC samples at sqrt(s) = 7 TeV. 

ROOT-tuples (made with V00-01-05) can be found in castor and should be
copied into directory specifed in text/configuration file
UserCode/CMGWPrimeGroup/config/top_directory.txt (must be edited by user)

Description of MC samples, cross-sections, # of events, etc can be found
in text/configuration file
UserCode/CMGWPrimeGroup/config/samples_cross_sections.txt 

More details at UserCode/CMGWPrimeGroup/doc/README.txt


17-JUN-10 (Christos), V00-01-05
===============================
#include change (FWCore/Framework/interface/TriggerNames.h to 
FWCore/Common/interface/TriggerNames.h) in order to be able to install in
36x release/process 36x data.


11-JUN-10 (Christos), V00-01-03
===============================
- Fix compilation problems with macro root_macros/Make.C when running on
SLC5 machines

- Fix warning showed up with new ROOT version/SLC5

- Small documenation improvements

07-JUN-10 (Christos), V00-01-02
===============================
Added few more parameters to the root-tuple 
(inspired by the EWK requests on W->muon reconstruction needed for dta):

- Per muon: # of stations contributing muon segments to track 
- Per track(ing algorithm): # of (valid) pixel, siStrip hits used in track



18-MAY-10 (Christos), V00-01-01
===============================
Added one more flag for each muon track: TMLastStationAngTight


12-MAY-10 (Christos), V00-01-00
===============================
Several changes to be able to deal with Collisions10 data:
o Switched to 3_5_8 as default working release
  (minor modifications to deal with new location of include files, etc.)

o Analyzer can now handle running over skims/list of files spanning 
  several runs;  Trigger menu/names updated at beginRun;

o Additional info added in root-tuples per run:
  - HLT sw release and ConfDB menu name
  - # of events processed/analyzed in run

o Additional info added in root-tuple per muon track 
  (for all tracking algorithms)
   - d0 and delta-d0
   - # of siStrip and pixel layers used by fit
   - quality flags: GlobalMuonPromptTight, TMLastStationLoose, 
     TMLastStationTight, AllGlobalMuons, AllStandAloneMuons, AllTrackerMuons

o Additional info added in root-tuple per event
   - New trigger bits: HLT_L2Mu5, HLT_L2Mu9, HLT_L2Mu11
   - Changed trigger decisions from "bool" to "signed char", in order to
     record three states: -1 (did not run), 0 (fail), 1 (accept); NB: triggers
     that are disabled (prescale = 0) are still recorded as 0/fail 
     (need to fix this)

o Removed support for 2_0_x releases

o Misc. cleanup


22-APR-10 (Edgar, Christos), V00-00-85
======================================
Cleanup of root-macros (contained in and driven by 
UserCode/CMGWPrimeGroup/root_macros/Make.C)
for easier maintainability and in preparation for new cut-optimization 
code


Note on data-format change (pfMET) introduced in V00-00-80:
----------------------------------------------------------
This does not introduce any backwards incompatibility when reading old
root-tuples. However, the speed will be significantly slower, as ROOT 
tries to work around the change. To correct for this inconvenience, one 
can temporarily overwrite UserCode/CMGWPrimeGroup/interface/wprimeEvent.h
with an earlier-than-V00-00-80 version if reading older files. 


20-APR-10 (Christos), V00-00-80
===============================
(1) Changes in analyzer:
- Can now analyze Summer09/31x MC samples (tested with 3_3_6 release)

- Removed storing of Calo-MET, switched to pfMET 


(2) Changes in fitting code:
- Significant boost in speed of fit convergence.

  Details:
  o Speed improvement is approximately a factor of ~5 (exact number 
depends on signal statistics) 
  o Achieved by caching some of the intermediate signal function
calculations in custom map structure.  
  o New code (switched on by default) in file fit_wprime_newAndFast.cpp,
old code kept for reference (fit_wprime_oldAndSlow.cpp). 


- Now keeping track of (Poisson-varying) input # of signal events when
repeating fits in large # of pseudo-experiments 


- Can now handle fits for Wprime mass of 2.0 TeV (in addition to 1.0, 1.5
TeV) 



11-MAR-10 (Christos), V00-00-71
===============================
- Added macro fitting/plot_sigbgd.C: Accesses ROOT file created by
fitSigBgd_eventLoop.C, and plots data distribution, along with fitting
function and fit results 

- Added python files for the processing of 2_2_12 Wprime (1, 1.5, 2 TeV)
and W->mu samples reconstructed with 50 pb^-1 AlCa tag


21-JAN-10 (Christos), V00-00-70
===============================
(1) Added support for running on misaligned Wprime and W samples (for the
rest of background: top, QCD, Z/DY we still use IDEAL alignment)

(2) Added support for fittings mis-aligned samples. Warning! User must
(a) switch to the appropriate resolution ROOT file 
(ie. cp gsmear_IDEAL.root gsmear.root, or
     cp gsmear_50PB-1.root gsmear.root)

(b) switch to appropriate description of background in function myBgd in
 file fitting/fit_wprime.cpp: myRBW (ie. Relativistic Breit-Wigner) works
better for IDEAL W sample, whereas myLandau (i.e. Landau) works better for
50 pb^-1 W sample.

(3) Several other minor improvements


04-NOV-09 (Christos), V00-00-67
===============================
Same as V00-00-66, with the addition of a test configuration file in 
python format (made it default example for macro/setup_Wprime.sh)


29-OCT-09 (Christos), V00-00-66
===============================
Added support for 2_2_x RECO (Wprime_muonreco producer)


21-OCT-09 (Christos), V00-00-65
===============================
Added fitting code used for CMS AN-2009/157. Details and instructions at 
UserCode/CMGWPrimeGroup/fitting/README_mupt_fits.txt


21-OCT-09 (Christos), V00-00-61
===============================
Removed obsolete histogram-making. All analyses are now based on custom
ROOT-tuples. Cleaned-up code validated with root-tuple containing 6k 
wprime events: no changes observed when compared with root-tuple made with
V00-00-56. 


20-OCT-09 (Christos), V00-00-60
================================
- Changes in default cuts: added |eta| < 1.8 for muon, require 
angle(muon, jet) > pi-0.3 for "jet activity" definition

- Changes in GetMuonPtDistribution.C: 
  o added real HLT cut (used to emulate it with |eta_RECO| < 2.1 cut)
  o change jet-activity cut to include angle between jet, muon (default
value: pi - 0.3 rad)
  o added |eta| < 1.8 cut for muon
  o misc. cleanup, moving constants, analysis cuts to new file (util.C)

- New macro that creates charge-asymmetry distributions for all tracking
algorithms: GetChargePtDistribution.C (set option = 3 in
GetDistributionGeneric.C). Macro that makes nice asymmetry plots:
plotChargeAsym.C 

- New macro that plots changes in muon-pt distributions for changes in
various analysis cuts: plotCutTune.C Currently needs manual adjustment of
cuts, rerunning, renaming root-tuples, etc. Should be automatized, find
optimum values. 

- New macro for making (nice) muon-pt distribution: plotMuPt2.C, with 
individual bgd contributions added into a single histogram


24-MAR-09 (Christos), V00-00-56
================================
Added uncertainty on track pt and q/p in output root-tuple. 

(root_macros, muon-pt distribution:) add |eta| < 2.1 cut on muons till we
sort out HLT problems with W samples


16-MAR-09 (Christos), V00-00-55
================================
Added more code under root_macros that produces muon-pt
distributions. Further work on decoupling generic macros (loading of input
files, applications of cross-section * filtering efficiency, etc) from
actual code that produces distributions for different cuts. 


06-MAR-09 (Christos), V00-00-54
================================
Fixing linking problems when compiling ROOT macros


06-MAR-09 (Christos), V00-00-53
================================
Added example ROOT macro that shows how to read back ROOT file

03-MAR-09 (Christos), V00-00-52
===============================
Added version # in output trees (as tree title). Must remember to update
newly added file VERSION before tagging code!


02-MAR-09 (Christos), V00-00-51
===============================
Implemented # of tracker-hits used by fit in tracking component of
wprime::Muon class


02-MAR-09 (Christos), V00-00-50
===============================
Added first version of root-tuple making code. Classes described in
wprimeEvent.h. 

Currently including:
- Job-level info: HLT/RECO version, sample description, # of events at
production level
- Event-level info: generator-level info for muons, muon-neutrinos, W and
W'. Jets, Muons with 3 types of tracking, 5 types of isolation (9 cone
sizes), 3 types of MET, and HLT decisions for single-muon triggers. 

Look at test/myanalysis_TeVMuon.cfg for new variables required.


02-FEB-09 (Alessio), V00-00-34
==============================
Added a parameter that require a minimum muon pt 
as measured in the tracker, for the muon to be
considered in the spectrum above 100 GeV. 
Setting it to 0 means running without the cut.
 
23-JAN-09 (Christos), V00-00-33
===============================
Added filtering code and example cfg file for filtering on high-pt muons
(any muon algorithm giving pt > 100 GeV)


16-JAN-09 (Christos), V00-00-32
===============================
Fixed persistence of trigger efficiency histograms. Fixed bug with 
gen-muon loop in trigger eff histograms. Fixed incorrect HLT path name for
21x release in default config file. 


14-JAN-09 (Alessio), V00-00-31
==============================
Added protection against missing global muon Ref in TeV muon map.


17-NOV-08 (Christos), V00-00-30
================================
Added additional reconstruction code from Silvia and Alessio. CVS package
should now have complete trigger + reconstruction code used to run 
previous jobs. 

TeV-muon reconstruction seems to be responsible for exception-throwing on
certain events; need to add protection so that events are not skipped.


05-NOV-08 (Christos), V00-00-16
================================
First porting of the code. Contains mostly trigger-related stuff. Test
configuration file (test/myanalysis_TeVMuon.cfg) tested on 21x MC files,
but should work in 20x as well.





